{
  String jsonMetrics=null;
  try {
    CollectionSchema schema=CACHE_REGISTRY_INSTANCE.getCollectionSchemaCache().get(collection);
    List<String> metrics=schema.getMetricNames();
    CollectionConfig collectionConfig=null;
    try {
      collectionConfig=queryCache.getClient().getCollectionConfig(collection);
    }
 catch (    InvalidCacheLoadException e) {
      LOG.debug("No collection configs for collection {}",collection);
    }
    if (collectionConfig != null && collectionConfig.getDerivedMetrics() != null) {
      metrics.addAll(collectionConfig.getDerivedMetrics().keySet());
      metrics.removeAll(collectionConfig.getDerivedMetrics().values());
    }
    Collections.sort(metrics);
    jsonMetrics=OBJECT_MAPPER.writeValueAsString(metrics);
  }
 catch (  Exception e) {
    LOG.error("Error while fetching metrics",e);
  }
  return jsonMetrics;
}
