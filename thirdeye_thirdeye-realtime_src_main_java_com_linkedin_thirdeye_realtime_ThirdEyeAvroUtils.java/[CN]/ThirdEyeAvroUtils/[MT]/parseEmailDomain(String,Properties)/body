{
  if (!emailAddress.contains("@")) {
    return INVALID_DIMENSION_VALUE;
  }
  String[] tokens=emailAddress.split("@");
  if (tokens.length != 2) {
    return INVALID_DIMENSION_VALUE;
  }
  String domain=tokens[1];
  if (normalize != null) {
    for (    String pattern : normalize.stringPropertyNames()) {
      if (domain.toLowerCase().contains(pattern)) {
        return normalize.getProperty(pattern);
      }
    }
  }
  return domain;
}
