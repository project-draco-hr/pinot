{
  MetricTimeSeries timeSeries=new MetricTimeSeries(metricSchema);
  timeSeries.set(0,"M",1000);
  StarTreeRecord record=new StarTreeRecordImpl.Builder().setDimensionKey(getDimensionKey("A1","B1","C1")).setMetricTimeSeries(timeSeries).build(config);
  recordStore.update(record);
  Iterator<StarTreeRecord> itr=recordStore.iterator();
  StarTreeRecord fromStore=itr.next();
  Assert.assertFalse(itr.hasNext());
  Assert.assertEquals(fromStore.getMetricTimeSeries().get(0,"M").intValue(),1000);
  recordStore.update(record);
  itr=recordStore.iterator();
  Assert.assertNotNull(itr.next());
  Assert.assertFalse(itr.hasNext());
}
