{
  CONFIG_BUILDER=new TestingServerPropertiesBuilder("mirror");
  setupSegmentFor("mirror");
  setUpTestQueries("mirror");
  final PropertiesConfiguration serverConf=CONFIG_BUILDER.build();
  serverConf.setDelimiterParsingDisabled(false);
  final FileBasedInstanceDataManager instanceDataManager=FileBasedInstanceDataManager.getInstanceDataManager();
  instanceDataManager.init(new FileBasedInstanceDataManagerConfig(serverConf.subset("pinot.server.instance")));
  instanceDataManager.start();
  final IndexSegment indexSegment=ColumnarSegmentLoader.load(new File(INDEX_DIR,"segment"),ReadMode.heap);
  instanceDataManager.getResourceDataManager("mirror");
  instanceDataManager.getResourceDataManager("mirror").addSegment(indexSegment);
  QUERY_EXECUTOR=new ServerQueryExecutorV1Impl(false);
  QUERY_EXECUTOR.init(serverConf.subset("pinot.server.query.executor"),instanceDataManager);
}
