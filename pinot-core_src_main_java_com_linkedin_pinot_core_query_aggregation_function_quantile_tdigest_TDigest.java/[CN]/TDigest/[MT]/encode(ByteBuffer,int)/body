{
  int k=0;
  while (n < 0 || n > 0x7f) {
    byte b=(byte)(0x80 | (0x7f & n));
    buf.put(b);
    n=n >>> 7;
    k++;
    Preconditions.checkState(k < 6);
  }
  buf.put((byte)n);
}
