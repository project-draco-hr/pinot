{
  try {
    TarArchiveInputStream tarBall=(TarArchiveInputStream)new ArchiveStreamFactory().createArchiveInputStream("tar",new GZIPInputStream(source));
    TarArchiveEntry entry;
    while ((entry=(TarArchiveEntry)tarBall.getNextEntry()) != null) {
      String[] pathTokens=entry.getName().split("/");
      if (stripComponents < pathTokens.length) {
        String path=join(File.separator,Arrays.copyOfRange(pathTokens,stripComponents,pathTokens.length));
        if (blacklist != null) {
          boolean shouldSkip=false;
          for (          String name : blacklist) {
            if (path.contains(name)) {
              shouldSkip=true;
              break;
            }
          }
          if (shouldSkip) {
            continue;
          }
        }
        File outputFile=new File(outputDir,path);
        if (entry.isDirectory()) {
          FileUtils.forceMkdir(outputFile);
        }
 else {
          OutputStream os=new FileOutputStream(outputFile);
          IOUtils.copy(tarBall,os);
          os.close();
        }
      }
    }
  }
 catch (  ArchiveException e) {
    throw new IOException(e);
  }
}
