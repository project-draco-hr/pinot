{
  super("dimension/heat-map.ftl");
  this.schema=schema;
  this.objectMapper=objectMapper;
  this.dimensionGroupMap=dimensionGroupMap;
  this.dimensionRegexMap=dimensionRegexMap;
  this.heatMaps=new ArrayList<>();
  this.metricNames=new ArrayList<>();
  this.dimensionNames=new ArrayList<>();
  this.baseline=baseline;
  this.current=current;
  updateMetricGlobalStats(resultForTotal);
  for (  Map.Entry<String,QueryResult> entry : queryResults.entrySet()) {
    List<HeatMap> heatMapsPerDimension=generateHeatMaps(entry.getKey(),entry.getValue());
    this.heatMaps.addAll(heatMapsPerDimension);
  }
  Collections.sort(heatMaps);
  for (  HeatMap heatMap : heatMaps) {
    if (!metricNames.contains(heatMap.getMetric())) {
      metricNames.add(heatMap.getMetric());
    }
    if (!dimensionNames.contains(heatMap.getDimension())) {
      dimensionNames.add(heatMap.getDimension());
    }
  }
}
