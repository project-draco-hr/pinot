{
  if (blockToMerge == null) {
    return;
  }
  if (mergedBlock == null) {
    mergedBlock=blockToMerge;
    return;
  }
  mergedBlock.setNumDocsScanned(mergedBlock.getNumDocsScanned() + blockToMerge.getNumDocsScanned());
  mergedBlock.setTotalDocs(mergedBlock.getTotalDocs() + blockToMerge.getTotalDocs());
  if (brokerRequest.isEnableTrace()) {
  }
  mergedBlock.setExceptionsList(combineExceptions(mergedBlock.getExceptions(),blockToMerge.getExceptions()));
  if (brokerRequest.isSetAggregationsInfo()) {
    if (brokerRequest.isSetGroupBy()) {
      mergedBlock.setAggregationGroupByResult1(combineAggregationGroupByResults1(brokerRequest,mergedBlock.getAggregationGroupByOperatorResult(),blockToMerge.getAggregationGroupByOperatorResult()));
    }
 else {
      List<AggregationFunction> aggregationFunctions=AggregationFunctionFactory.getAggregationFunction(brokerRequest);
      mergedBlock.setAggregationFunctions(aggregationFunctions);
      mergedBlock.setAggregationResults(combineAggregationResults(brokerRequest,mergedBlock.getAggregationResult(),blockToMerge.getAggregationResult()));
    }
  }
 else {
    if (brokerRequest.getSelections().isSetSelectionSortSequence()) {
      SelectionOperatorService selectionService=new SelectionOperatorService(brokerRequest.getSelections(),mergedBlock.getSelectionDataSchema());
      mergedBlock.setSelectionResult(selectionService.merge(mergedBlock.getSelectionResult(),blockToMerge.getSelectionResult()));
    }
 else {
      mergedBlock.setSelectionResult(SelectionOperatorUtils.merge(mergedBlock.getSelectionResult(),blockToMerge.getSelectionResult(),brokerRequest.getSelections().getSize()));
    }
  }
}
