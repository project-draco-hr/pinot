{
  final ReportScheduler reportScheduler=new ReportScheduler(new File(configuration.getReportConfigPath()),configuration.getServerUri(),configuration.getDashboardUri());
  environment.lifecycle().manage(new Managed(){
    @Override public void start() throws Exception {
      reportScheduler.start();
    }
    @Override public void stop() throws Exception {
      reportScheduler.stop();
    }
  }
);
  environment.jersey().register(new ReportsResource(environment.metrics(),configuration.getReportConfigPath()));
  environment.jersey().register(new AdminResource());
  environment.admin().addTask(new ReportingTask(reportScheduler));
}
