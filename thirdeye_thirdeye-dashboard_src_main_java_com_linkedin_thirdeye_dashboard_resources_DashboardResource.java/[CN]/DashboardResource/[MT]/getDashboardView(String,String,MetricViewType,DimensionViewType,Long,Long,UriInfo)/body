{
  Map<String,String> dimensionValues=UriUtils.extractDimensionValues(uriInfo.getQueryParameters());
  for (  Map.Entry<String,String> entry : dimensionValues.entrySet()) {
    if ("!".equals(entry.getValue())) {
      throw new WebApplicationException(new IllegalArgumentException("No group by dimensions allowed"),Response.Status.BAD_REQUEST);
    }
  }
  try {
    View metricView=getMetricView(collection,metricFunction,metricViewType,baselineMillis,currentMillis,uriInfo);
    View dimensionView=getDimensionView(collection,metricFunction,dimensionViewType,baselineMillis,currentMillis,uriInfo);
    return new DashboardView(dataCache.getCollectionSchema(serverUri,collection),new DateTime(baselineMillis),new DateTime(currentMillis),new MetricView(metricView,metricViewType),new DimensionView(dimensionView,dimensionViewType));
  }
 catch (  Exception e) {
    if (e instanceof WebApplicationException) {
      throw e;
    }
    LOG.error("Error processing request {}",uriInfo.getRequestUri(),e);
    return new ExceptionView(e);
  }
}
