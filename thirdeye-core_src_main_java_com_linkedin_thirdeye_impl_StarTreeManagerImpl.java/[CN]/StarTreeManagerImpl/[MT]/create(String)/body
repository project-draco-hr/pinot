{
synchronized (trees) {
    StarTree starTree=trees.get(collection);
    if (starTree == null) {
      StarTreeConfig config=configs.get(collection);
      if (config == null) {
        throw new IllegalStateException("No config exists for collection " + collection);
      }
      starTree=new StarTreeImpl(config);
      trees.put(collection,starTree);
    }
  }
}
