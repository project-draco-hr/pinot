{
  Map<String,Number> baseline=new HashMap<String,Number>();
  Map<String,Number> current=new HashMap<String,Number>();
  for (  Map.Entry<String,MetricTimeSeries> entry : timeSeriesByDimensionValue.entrySet()) {
    MetricTimeSeries timeSeries=entry.getValue();
    MetricType metricType=timeSeries.getSchema().getMetricType(metricName);
    sumByDimension(metricName,metricType,entry.getKey(),baseline,baselineTime,timeSeries);
    sumByDimension(metricName,metricType,entry.getKey(),current,currentTime,timeSeries);
  }
  return generateHeatMap(baseline,current);
}
