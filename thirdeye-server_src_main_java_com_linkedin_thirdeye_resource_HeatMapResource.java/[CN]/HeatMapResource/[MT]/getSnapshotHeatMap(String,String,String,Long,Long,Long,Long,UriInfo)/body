{
  StarTree starTree=starTreeManager.getStarTree(collection);
  if (starTree == null) {
    throw new NotFoundException("No collection " + collection);
  }
  List<Map<String,Number>> result=doQuery(starTree,metricName,dimensionName,baselineStart,baselineEnd,currentStart,currentEnd,uriInfo);
  HeatMap heatMap=new SnapshotHeatMap(result.get(0),result.get(1),2);
  return heatMap.generateHeatMap(result.get(0),result.get(1));
}
