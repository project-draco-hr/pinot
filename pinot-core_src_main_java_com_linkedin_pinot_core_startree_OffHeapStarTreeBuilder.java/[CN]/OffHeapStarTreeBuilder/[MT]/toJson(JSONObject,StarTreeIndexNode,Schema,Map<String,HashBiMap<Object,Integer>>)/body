{
  String dimName="ALL";
  Object dimValue="ALL";
  if (node.getDimensionName() != StarTreeIndexNode.all()) {
    dimName=schema.getDimensionFieldSpecs().get(node.getDimensionName()).getName();
  }
  if (node.getDimensionValue() != StarTreeIndexNode.all()) {
    dimValue=dictionaryMap.get(dimName).inverse().get(node.getDimensionValue());
  }
  json.put("title",dimName + ":" + dimValue);
  if (node.getChildren() != null) {
    JSONObject[] childJsons=new JSONObject[node.getChildren().size()];
    int index=0;
    for (    Integer child : node.getChildren().keySet()) {
      StarTreeIndexNode childNode=node.getChildren().get(child);
      JSONObject childJson=new JSONObject();
      toJson(childJson,childNode,schema,dictionaryMap);
      childJsons[index++]=childJson;
    }
    json.put("nodes",childJsons);
  }
}
