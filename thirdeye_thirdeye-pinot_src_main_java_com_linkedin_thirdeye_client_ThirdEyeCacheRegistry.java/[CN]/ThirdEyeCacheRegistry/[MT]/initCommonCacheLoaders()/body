{
  ThirdEyeCacheRegistry cacheRegistry=ThirdEyeCacheRegistry.getInstance();
  RemovalListener<PinotQuery,ResultSetGroup> listener=new RemovalListener<PinotQuery,ResultSetGroup>(){
    @Override public void onRemoval(    RemovalNotification<PinotQuery,ResultSetGroup> notification){
      LOGGER.info("Expired {}",notification.getKey().getPql());
    }
  }
;
  LoadingCache<PinotQuery,ResultSetGroup> resultSetGroupCache=CacheBuilder.newBuilder().removalListener(listener).expireAfterAccess(1,TimeUnit.HOURS).build(new ResultSetGroupCacheLoader(pinotThirdeyeClientConfig));
  cacheRegistry.registerResultSetGroupCache(resultSetGroupCache);
  LoadingCache<String,Schema> schemaCache=CacheBuilder.newBuilder().build(new SchemaCacheLoader(pinotThirdeyeClientConfig));
  cacheRegistry.registerSchemaCache(schemaCache);
  LoadingCache<String,CollectionSchema> collectionSchemaCache=CacheBuilder.newBuilder().build(new CollectionSchemaCacheLoader(pinotThirdeyeClientConfig,collectionSchemaDAO));
  cacheRegistry.registerCollectionSchemaCache(collectionSchemaCache);
  LoadingCache<String,Long> collectionMaxDataTimeCache=CacheBuilder.newBuilder().build(new CollectionMaxDataTimeCacheLoader(pinotThirdeyeClientConfig));
  cacheRegistry.registerCollectionMaxDataTimeCache(collectionMaxDataTimeCache);
  LoadingCache<String,CollectionConfig> collectionConfigCache=CacheBuilder.newBuilder().build(new CollectionConfigCacheLoader(collectionConfigDAO));
  cacheRegistry.registerCollectionConfigCache(collectionConfigCache);
  LoadingCache<String,String> collectionAliasCache=CacheBuilder.newBuilder().build(new CollectionAliasCacheLoader(collectionConfigDAO));
  cacheRegistry.registerCollectionAliasCache(collectionAliasCache);
  QueryCache queryCache=new QueryCache(thirdEyeClient,Executors.newFixedThreadPool(10));
  cacheRegistry.registerQueryCache(queryCache);
}
