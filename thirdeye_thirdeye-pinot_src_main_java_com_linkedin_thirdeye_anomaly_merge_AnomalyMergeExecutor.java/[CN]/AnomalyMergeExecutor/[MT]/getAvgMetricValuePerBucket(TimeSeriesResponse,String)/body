{
  Double totalVal=0.0;
  int numBuckets=0;
  for (int i=0; i < response.getNumRows(); i++) {
    for (    TimeSeriesRow.TimeSeriesMetric metricData : response.getRow(i).getMetrics()) {
      if (metricName.equals(metricData.getMetricName())) {
        totalVal+=metricData.getValue();
        numBuckets++;
      }
    }
  }
  if (numBuckets == 0) {
    return totalVal;
  }
  return totalVal / numBuckets;
}
