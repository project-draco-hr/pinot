{
  ByteBuffer buffer;
  if (useDirect) {
    buffer=ByteBuffer.allocateDirect(bufferSize);
  }
 else {
    buffer=ByteBuffer.allocate(bufferSize);
  }
  buffer.limit(0);
  return buffer;
}
