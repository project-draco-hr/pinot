{
  Connection conn=null;
  PreparedStatement preparedStmt=null;
  try {
    conn=dbConfig.getConnection();
    preparedStmt=conn.prepareStatement(String.format(ResourceUtils.getResourceAsString("database/rulebased/insert-rule-template.sql"),dbConfig.getFunctionTableName()));
    preparedStmt.setString(1,getFunctionName());
    preparedStmt.setString(2,getFunctionDescription());
    preparedStmt.setString(3,getCollectionName());
    preparedStmt.setString(4,getMetricName());
    preparedStmt.setDouble(5,getDelta());
    preparedStmt.setString(6,getAggregateUnit().toString());
    preparedStmt.setInt(7,getAggregateSize());
    preparedStmt.setString(8,getBaselineUnit().toString());
    preparedStmt.setInt(9,getBaselineSize());
    preparedStmt.setInt(10,getConsecutiveBuckets());
    preparedStmt.setString(11,getCronDefinition());
    preparedStmt.setString(12,getDeltaTableName());
    preparedStmt.executeUpdate();
  }
 catch (  SQLException e) {
    throw e;
  }
 finally {
    try {
      if (conn != null) {
        conn.close();
      }
      if (preparedStmt != null) {
        preparedStmt.close();
      }
    }
 catch (    SQLException e) {
      LOGGER.error("close exception",e);
    }
  }
}
