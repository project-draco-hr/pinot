{
  STLDecomposition.Config config=new STLDecomposition.Config();
  config.setNumberOfObservations(seasonality);
  config.setNumberOfInnerLoopPasses(innerloop);
  config.setNumberOfRobustnessIterations(outerloop);
  config.setLowPassFilterBandwidth(lowpassbandwidth);
  config.setTrendComponentBandwidth(trendcomponentbandwidth);
  config.setPeriodic(periodic);
  config.setNumberOfDataPoints(timestamps.length);
  STLDecomposition stl=new STLDecomposition(config);
  STLDecomposition.STLResult res=stl.decompose(timestamps,series);
  double[] trend=res.getTrend();
  double[] remainder=res.getRemainder();
  double[] seasonalityOutput=new double[trend.length];
  for (int i=0; i < trend.length; i++) {
    seasonalityOutput[i]=series[i] - (trend[i] + remainder[i]);
  }
  double[][] results=new double[3][trend.length];
  results[0]=trend;
  results[1]=remainder;
  results[2]=seasonalityOutput;
  return results;
}
