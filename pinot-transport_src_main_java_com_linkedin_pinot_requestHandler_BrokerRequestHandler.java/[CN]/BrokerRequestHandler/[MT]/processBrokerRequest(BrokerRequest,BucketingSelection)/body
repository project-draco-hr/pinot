{
  if (request == null || request.getQuerySource() == null || request.getQuerySource().getResourceName() == null) {
    LOGGER.info("Query contains null resource.");
    return BrokerResponse.getNullBrokerResponse();
  }
  List<String> matchedResources=getMatchedResources(request);
  if (matchedResources.size() > 1) {
    return processFederatedBrokerRequest(request,overriddenSelection);
  }
  if (matchedResources.size() == 1) {
    return processSingleResourceBrokerRequest(request,matchedResources.get(0),overriddenSelection);
  }
  return BrokerResponse.getNullBrokerResponse();
}
