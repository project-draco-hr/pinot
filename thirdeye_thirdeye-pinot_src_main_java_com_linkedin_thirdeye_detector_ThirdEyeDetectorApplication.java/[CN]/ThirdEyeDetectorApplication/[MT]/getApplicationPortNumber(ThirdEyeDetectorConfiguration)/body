{
  int httpPort=0;
  try {
    ServerFactory serverFactory=config.getServerFactory();
    if (serverFactory instanceof DefaultServerFactory) {
      DefaultServerFactory defaultFactory=(DefaultServerFactory)config.getServerFactory();
      for (      ConnectorFactory connectorFactory : defaultFactory.getApplicationConnectors()) {
        if (connectorFactory.getClass().isAssignableFrom(HttpConnectorFactory.class)) {
          httpPort=((HttpConnectorFactory)connectorFactory).getPort();
          break;
        }
      }
    }
 else     if (serverFactory instanceof SimpleServerFactory) {
      SimpleServerFactory simpleFactory=(SimpleServerFactory)serverFactory;
      HttpConnectorFactory connector=(HttpConnectorFactory)simpleFactory.getConnector();
      if (connector.getClass().isAssignableFrom(HttpConnectorFactory.class)) {
        httpPort=connector.getPort();
      }
    }
  }
 catch (  Exception e) {
    LOG.error("Failed to retrieve app port number from dropwizard server factory",e);
  }
  return httpPort;
}
