{
synchronized (sync) {
    compactBuffer(getBuffer());
  }
  return recordCount.get();
}
