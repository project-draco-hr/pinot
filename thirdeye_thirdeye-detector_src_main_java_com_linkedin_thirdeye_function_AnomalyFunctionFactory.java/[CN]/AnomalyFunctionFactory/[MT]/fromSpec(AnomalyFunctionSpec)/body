{
  AnomalyFunction anomalyFunction=null;
  Type type=Type.valueOf(functionSpec.getType().toUpperCase());
switch (type) {
case KALMAN_FILTER:
    anomalyFunction=new KalmanFilterAnomalyFunction();
  break;
case SCAN_STATISTICS:
anomalyFunction=new ScanStatisticsAnomalyFunction();
break;
case USER_RULE:
anomalyFunction=new UserRuleAnomalyFunction();
break;
default :
throw new IllegalArgumentException("Unsupported type " + type);
}
anomalyFunction.init(functionSpec);
return anomalyFunction;
}
