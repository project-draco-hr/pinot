{
  AnomalyFunctionSpec function=functionDAO.findById(relation.getFunctionId());
  EmailConfiguration emailConfiguration=emailDAO.findById(relation.getEmailId());
  if (function != null && emailConfiguration != null) {
    if (!emailConfiguration.getFunctions().contains(function)) {
      emailConfiguration.getFunctions().add(function);
      emailDAO.save(emailConfiguration);
    }
  }
 else {
    throw new IllegalArgumentException("function or email not found for input : " + relation.toString());
  }
  return Response.ok().build();
}
