{
  String encodedCollection=URLEncoder.encode(collection,ENCODING);
  Set<String> encodedMetrics=new HashSet<String>(metrics.size());
  for (  String metricName : metrics) {
    encodedMetrics.add(URLEncoder.encode(metricName,ENCODING));
  }
  Map<String,String> encodedDimensions=new HashMap<String,String>(dimensions.size());
  for (  Map.Entry<String,String> entry : dimensions.entrySet()) {
    encodedDimensions.put(URLEncoder.encode(entry.getKey(),ENCODING),URLEncoder.encode(entry.getValue(),ENCODING));
  }
  return new ThirdEyeQuery(encodedCollection,startTime,endTime,encodedDimensions,encodedMetrics);
}
