{
  byte[] bytes=new byte[numBytes];
  ByteBuffer buffer=ByteBuffer.wrap(bytes);
  for (int i=0; i < metricTypes.size(); i++) {
switch (metricTypes.get(i)) {
case SHORT:
      buffer.putShort(numbers[i].shortValue());
    break;
case INT:
  buffer.putInt(numbers[i].intValue());
break;
case LONG:
buffer.putLong(numbers[i].longValue());
break;
case FLOAT:
buffer.putFloat(numbers[i].floatValue());
break;
case DOUBLE:
buffer.putDouble(numbers[i].doubleValue());
break;
default :
throw new IllegalArgumentException("Unsupported metric type " + metricTypes.get(i));
}
}
return bytes;
}
