{
  File ROOT_DIR=new File(rootDir,"thirdeye-server");
  int REQUEST_TIMEOUT_MILLIS=10000;
  ThirdEyeApplication.Config config=new ThirdEyeApplication.Config();
  config.setRootDir(ROOT_DIR.getAbsolutePath());
  DropWizardApplicationRunner.DropWizardServer<ThirdEyeApplication.Config> server=DropWizardApplicationRunner.createServer(config,ThirdEyeApplication.class);
  assertTrue(server.getMetricRegistry() != null);
  server.start();
  long startTime=System.currentTimeMillis();
  boolean success=false;
  while (System.currentTimeMillis() - startTime < REQUEST_TIMEOUT_MILLIS) {
    try {
      HttpURLConnection conn=(HttpURLConnection)URI.create("http://localhost:8080/admin").toURL().openConnection();
      byte[] res=IOUtils.toByteArray(conn.getInputStream());
      if (Arrays.equals(res,"GOOD".getBytes())) {
        success=true;
        break;
      }
    }
 catch (    Exception e) {
    }
  }
  assertTrue(success);
  testServerUpload();
  checkData();
  server.stop();
}
