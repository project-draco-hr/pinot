{
  StarTreeConfig.Builder config=new StarTreeConfig.Builder().setMaxRecordStoreEntries(payload.getMaxRecordStoreEntries()).setDimensionNames(payload.getDimensionNames()).setMetricNames(payload.getMetricNames());
  if (payload.getThresholdFunctionClass() != null) {
    config.setThresholdFunctionClass(payload.getThresholdFunctionClass());
    if (payload.getThresholdFunctionConfig() != null) {
      Properties props=new Properties();
      props.putAll(payload.getThresholdFunctionConfig());
      config.setThresholdFunctionConfig(props);
    }
  }
  if (payload.getRecordStoreFactoryClass() != null) {
    config.setRecordStoreFactoryClass(payload.getRecordStoreFactoryClass());
    if (payload.getRecordStoreFactoryConfig() != null) {
      Properties props=new Properties();
      props.putAll(payload.getRecordStoreFactoryConfig());
      config.setRecordStoreFactoryConfig(props);
    }
  }
  starTreeManager.registerConfig(payload.getCollection(),config.build());
  return Response.ok().build();
}
