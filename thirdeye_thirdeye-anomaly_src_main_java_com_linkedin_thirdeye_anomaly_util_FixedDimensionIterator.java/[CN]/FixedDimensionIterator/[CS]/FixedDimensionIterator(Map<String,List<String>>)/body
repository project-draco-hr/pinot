{
  position=0;
  this.fixedDimensions=fixedDimensions;
  this.dimensionNames=new ArrayList<>(fixedDimensions.keySet());
  int numDimensions=dimensionNames.size();
  offsets=new long[numDimensions];
  if (numDimensions > 0) {
    numCombinations=1;
    for (int i=0; i < numDimensions; i++) {
      String dimension=dimensionNames.get(i);
      int dimensionSize=fixedDimensions.get(dimension).size();
      offsets[i]=numCombinations;
      long prevNumCombinations=numCombinations;
      numCombinations*=dimensionSize;
      if (numCombinations < prevNumCombinations) {
        throw new ArithmeticException("long overflow");
      }
    }
  }
 else {
    numCombinations=0;
  }
}
