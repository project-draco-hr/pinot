{
  File rootDir=new File(config.getRootDir());
  StarTreeManager starTreeManager=new StarTreeManagerImpl();
  environment.healthChecks().register(NAME,new ThirdEyeHealthCheck());
  environment.jersey().register(new ThirdEyeMetricsResource(starTreeManager));
  environment.jersey().register(new ThirdEyeDimensionsResource(starTreeManager));
  environment.jersey().register(new ThirdEyeCollectionsResource(starTreeManager));
  environment.jersey().register(new ThirdEyeTimeSeriesResource(starTreeManager));
  environment.admin().addTask(new ThirdEyeRestoreTask(starTreeManager,rootDir));
  environment.admin().addTask(new ThirdEyeDumpTreeTask(starTreeManager));
  environment.lifecycle().addLifeCycleListener(new ThirdEyeLifeCycleListener(starTreeManager));
}
