{
  try {
    HttpClient httpClient=new HttpClient();
    GetMethod httpget=new GetMethod(url);
    httpClient.executeMethod(httpget);
    long ret=httpget.getResponseContentLength();
    BufferedOutputStream output=new BufferedOutputStream(new FileOutputStream(file));
    IOUtils.copyLarge(httpget.getResponseBodyAsStream(),output);
    IOUtils.closeQuietly(output);
    return ret;
  }
 catch (  Exception ex) {
    LOGGER.error("Caught exception",ex);
    Utils.rethrowException(ex);
    throw new AssertionError("Should not reach this");
  }
}
