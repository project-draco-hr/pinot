{
  Session session=sessionFactory.openSession();
  Long jobExecutionId=null;
  try {
    ManagedSessionContext.bind(session);
    AnomalyJobSpec anomalyJobSpec=new AnomalyJobSpec();
    anomalyJobSpec.setJobName(detectionJobContext.getJobName());
    anomalyJobSpec.setWindowStartTime(detectionJobContext.getWindowStart().getMillis());
    anomalyJobSpec.setWindowEndTime(detectionJobContext.getWindowEnd().getMillis());
    anomalyJobSpec.setScheduleStartTime(System.currentTimeMillis());
    anomalyJobSpec.setStatus(JobStatus.SCHEDULED);
    jobExecutionId=anomalyJobSpecDAO.save(anomalyJobSpec);
    LOG.info("Created anomalyJobSpec {} with jobExecutionId {}",anomalyJobSpec,jobExecutionId);
  }
 catch (  Exception e) {
    LOG.error("Exception in creating detection job",e);
  }
 finally {
    session.close();
    ManagedSessionContext.unbind(sessionFactory);
  }
  return jobExecutionId;
}
