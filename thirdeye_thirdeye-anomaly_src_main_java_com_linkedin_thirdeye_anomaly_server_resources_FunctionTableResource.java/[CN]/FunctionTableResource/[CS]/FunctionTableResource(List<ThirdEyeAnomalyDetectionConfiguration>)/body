{
  collectionToThirdEyeClient=new HashMap<>();
  collectionToConfigMap=new HashMap<>();
  for (  ThirdEyeAnomalyDetectionConfiguration config : configs) {
    CachedThirdEyeClientConfig thirdEyeClientConfig=new CachedThirdEyeClientConfig();
    thirdEyeClientConfig.setExpirationTime(60);
    thirdEyeClientConfig.setExpirationUnit(TimeUnit.MINUTES);
    thirdEyeClientConfig.setExpireAfterAccess(false);
    thirdEyeClientConfig.setUseCacheForExecuteMethod(true);
    collectionToConfigMap.put(config.getCollectionName(),config);
    ThirdEyeClient client=new DefaultThirdEyeClientFactory(thirdEyeClientConfig).getClient(config.getThirdEyeServerHost(),config.getThirdEyeServerPort());
    client=new FlowControlledThirdEyeClient(client,MAX_PARALLEL_REQUESTS);
    collectionToThirdEyeClient.put(config.getCollectionName(),client);
  }
}
