{
  AnomalyFunctionSpec spec=TestAnomalyFunctionDAO.getTestFunctionSpec();
  anomalyFunctionDAO.save(spec);
  Assert.assertNotNull(spec);
  AnomalyResult result=getAnomalyResult();
  result.setFunction(spec);
  anomalyResultDAO.save(result);
  AnomalyResult resultRet=anomalyResultDAO.findById(result.getId());
  Assert.assertEquals(resultRet.getFunction(),spec);
  AnomalyFunctionSpec specRet=anomalyFunctionDAO.findById(spec.getId());
  Assert.assertEquals(specRet.getAnomalies().size(),1);
  anomalyResultId=result.getId();
}
