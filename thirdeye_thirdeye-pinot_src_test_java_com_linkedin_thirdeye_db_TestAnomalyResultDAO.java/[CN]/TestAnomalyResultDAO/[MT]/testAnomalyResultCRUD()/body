{
  AnomalyFunctionSpec spec=TestAnomalyFunctionDAO.getTestFunctionSpec();
  anomalyFunctionDAO.save(spec);
  Assert.assertNotNull(spec);
  AnomalyResult result=getAnomalyResult(spec.getId());
  anomalyResultDAO.save(result);
  AnomalyFunctionSpec specRet=anomalyFunctionDAO.findById(spec.getId());
  Assert.assertEquals(specRet.getAnomalies().size(),1);
  anomalyResultDAO.deleteById(result.getId());
  anomalyFunctionDAO.delete(specRet);
}
