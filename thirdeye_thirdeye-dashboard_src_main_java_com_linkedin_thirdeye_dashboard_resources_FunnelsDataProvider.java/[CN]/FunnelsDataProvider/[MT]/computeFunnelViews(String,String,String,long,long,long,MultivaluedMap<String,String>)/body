{
  List<FunnelTable> funnelViews=new ArrayList<FunnelTable>();
  if (selectedFunnels != null && selectedFunnels.length() > 0) {
    String[] funnels=selectedFunnels.split(",");
    if (funnels.length == 0) {
      return null;
    }
    for (    String funnel : funnels) {
      LOG.info("adding funnel views for collection, {}, with funnel name {}",collection,funnel);
      FunnelSpec spec=funnelSpecsMap.get(collection).getFunnels().get(funnel);
      funnelViews.add(getFunnelDataFor(collection,metricFunction,spec,baselineMillis,currentMillis,intraPeriod,dimensionValues));
    }
  }
  FunnelSpec defaultSpec=createDefaultFunnelSpec(collection);
  funnelViews.add(getFunnelDataFor(collection,metricFunction,defaultSpec,baselineMillis,currentMillis,intraPeriod,dimensionValues));
  return funnelViews;
}
