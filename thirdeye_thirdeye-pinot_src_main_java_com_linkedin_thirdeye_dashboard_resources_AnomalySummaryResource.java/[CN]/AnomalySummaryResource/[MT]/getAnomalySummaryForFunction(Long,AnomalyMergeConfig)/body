{
  if (mergeConfig == null) {
    mergeConfig=new AnomalyMergeConfig();
  }
  if (functionId == null) {
    throw new IllegalArgumentException("Function id can't be null");
  }
  DateTime startTimeUtc=new DateTime(mergeConfig.getStartTime());
  DateTime endTimeUtc=new DateTime(mergeConfig.getEndTime());
  List<AnomalyResult> anomalies=resultDAO.findAllByTimeAndFunctionId(startTimeUtc,endTimeUtc,functionId);
  return AnomalySummaryGenerator.mergeAnomalies(anomalies,mergeConfig);
}
